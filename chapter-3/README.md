# chapter3でやること
型について

## 環境設定
chapter2で実施した内容とtsconfigはnpx tsc --initを使って行う。

# 型
## any
anyはすべての型の親となる。
が基本的にはanyは使わず適切な型を使うべきである。

理由は何でもできてしまうため。
通常のJavaScriptと同じになってしまい、型定義で期待される
安全性を失ってしまうからである。

## bigint
(本ページ内のソースでは使うことができない！！！)
丸めのエラーに遭遇することなく、大きな整数を扱うことができる。
number型は2の53乗まで扱うことができるが、
bigintはそれより多くな整数を表すことができる。

## symbol
(Symbolを試したがエラーになったので実際に試すのは割愛)
JavaScriptの最近の大きな改訂の1つ(ES2015)で導入されたもの。
実際には頻繁には使われない。

オブジェクトやマップにおいて文字列キーの代わりとして既知のキーが適切に使われ、
うっかり誤った値が設定されていないことを強く確信したいような場合に用いられる。

例は以下の通り
* オブジェクトに対してデフォルトのイテレーターを設定する
  * Symbol.iterator
* オブジェクトがなにかのインスタンスであるかを実行時にオーバーライドする
  * Symbpl.hasInstance

 ## object
 TYpeScriptでは型を使ってオブジェクトを表現する方法がいくつかある。

### 値をobjectとして宣言する
以下はobjectTest1をobjectとして定義した実装である。
`objectTest1.a`としたときにエラーが発生しこのままでは使えない。
```
let objectTest1: object = {
    a: 'x'
}
// aにアクセスしようとするが以下のエラーがでる
// [ts] プロパティ 'a' は型 'object' に存在しません。
objectTest1.a
```

これはanyよりは限定的になっているが、実際はほぼ同じ意味である。
つまりはJavaScriptのオブジェクトであり、nullでないことを伝えているのみである。

### オブジェクリテラル表記
以下のように型をTypeScriptに推測させるようにする方法である。
```
let objectTest2 = {
    b: 'x'
}
```

もしくは以下のように型を明示的に記述することもできる
```
let objectTest4: {b: number} = {
    b: 12
}
```

### インデックスシグネチャ
[key: T]: Uという構文をインデックスシグネチャと言う。
オブジェクトがより多くのきーを　含む可能性があることをTypeScriptに伝える方法である。

#### 読み方の例
「このオブジェクトについては、型Tのすべてのキーは、型Uの値をもたなければならない」

#### 使った場合の利点
明示的に宣言したキーの他に、より多くのキーを安全にオブジェクトに追加することができる。

#### おぼえておくべきルール
インデックスシグネチャのキーの型(T)はnumberかstringのどちらかである必要がある。
インデックスシグネチャのキーの名前には任意の言葉が使える。keyである必要はない。


### オブジェクトまとめ
TypeScriptでオブジェクトを宣言する方法は4つある。
1. オブジェクトリテラル表記({a: string}など。)
    1. オブジェクトがどのようなフィールドを持つかがわかっている場合や、オブジェクトのすべての値が同じ型を
  もつ場合に使います。
1. からのオブジェクトリテラル表記({})。これはできるだけ避けること。
1. object型。これは単にオブジェクトが必要でどのようなフィールドを持つかは重視しない場合に使う。
1. Object型。これはできるだけ避けること。

ほとんどの場合、1か3を使うべきである。
2、4番目の方法は避けるように注意すること。

## 型エイリアス、合併、交差
### 型エイリアス
ある型を指し示す型エイリアス(type alias: 型の別名)を宣言することができる。
```
type Age = number
type Person = {
    name: string
    age: Age
}
```

#### 用途
以下のような用途がある。
- 繰り返される複雑な型をDRYに書くこと。
- ある変数がなにの目的で使われているかを明確にするため。

### 合併型,交差型
#### 定義
##### 前提事項
AとBの２つがある場合を想定

##### 内容
合併(union)とはそれらの和(A,B,またはその両方に含まれるすべてのもの)を指す。
交差(intersection)とはそれらが共通して持つもの(AとBの両方に含まれるすべてのもの)を指す。

###### 集合の考え方
- union = 和集合のもの
- interssection = 積

#### TypeScriptのコード
合併と交差を表現するための特別な型演算子が用意されている。
- 合併 = |
- 交差 = &

```
type Cat = {name: string, purrs: boolean}
type Dog = {name: string, barks: boolean, wags: boolean}
// これが合併(union)
type CatOrDogOrBoth = Cat | Dog
// これが交差(intersection)
type CatAndDog = Cat & Dog
```